<app-loading-spinner *ngIf="loading"></app-loading-spinner>

<button (click)="back()" class="mb-5 text-textLight dark:text-textDark">
  <i class="fa-solid fa-arrow-left"></i> Back
</button>

<div
  class="fixed-width-container overflow-x-auto scrollbar-thin scrollbar-thumb-[#8AC440] scrollbar-track-transparent scrollbar-thumb-rounded-full">
  <div class="pt-5 pr-12 pl-12 pb-5 w-100 min-w-[1200px] bg-tileLight dark:bg-tileBlack shadow-lg rounded-lg">
  <!-- class="fixed-width-container overflow-x-auto scrollbar-thin scrollbar-thumb-[#8AC440] scrollbar-track-transparent scrollbar-thumb-rounded-full"> -->
  <div class="pt-5 pr-12 pl-12 pb-5 w-100 min-w-[1200px] bg-tileLight dark:bg-tileBlack shadow-lg rounded-lg">
    <div class="flex justify-between items-center mb-8">
      <div class="w-3/4">
        <div class="flex flex-col">
          <div class="flex items-start pt-6">
            <h2 class="text-2xl font-bold text-textLight dark:text-textDark">
              {{ package?.displayName }}
            </h2>
            <h2 class="text-2xl font-bold px-5 dark:text-textDark">-</h2>
            <h2 class="text-2xl font-normal text-[#00957D] dark:text-textDark">
              Rs {{ package?.productPrice }}
            </h2>
          </div>
          <div class="flex flex-col pt-2">
            <div class="text-[#0D9488]" [class.text-green-500]="package?.status === 'Disabled'"
              [class.text-red-500]="package?.status !== 'Enabled'">
              <span>{{ package?.status }}</span>
            </div>
            <div class="pt-2">
              <p class="whitespace-pre-line dark:text-textDark">
                {{ package?.description }}
              </p>
            </div>
          </div>
        </div>
      </div>
      <div class="flex w-1/4 items-center justify-center align-middle h-full">
        <img *ngIf="package?.image" class="h-auto max-h-48 flex items-center" [src]="package?.image"
          [alt]="package?.displayName" />
        <svg *ngIf="!package?.image" class="h-auto max-h-24 flex items-center" fill="#afafaf" viewBox="0 0 24 24"
          xmlns="http://www.w3.org/2000/svg" data-name="Layer 1" stroke="#afafaf">
          <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
          <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
          <g id="SVGRepo_iconCarrier">
            <path
              d="M19.5,4H10a1,1,0,0,0,0,2H19.5a1,1,0,0,1,1,1v6.76l-1.88-1.88a3,3,0,0,0-1.14-.71,1,1,0,1,0-.64,1.9.82.82,0,0,1,.36.23l3.31,3.29a.66.66,0,0,0,0,.15.83.83,0,0,0,0,.15,1.18,1.18,0,0,0,.13.18.48.48,0,0,0,.09.11.9.9,0,0,0,.2.14.6.6,0,0,0,.11.06.91.91,0,0,0,.37.08,1,1,0,0,0,1-1V7A3,3,0,0,0,19.5,4ZM3.21,2.29A1,1,0,0,0,1.79,3.71L3.18,5.1A3,3,0,0,0,2.5,7V17a3,3,0,0,0,3,3H18.09l1.7,1.71a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42ZM4.5,7a1,1,0,0,1,.12-.46L7.34,9.25a3,3,0,0,0-1,.63L4.5,11.76Zm1,11a1,1,0,0,1-1-1V14.58l3.3-3.29a1,1,0,0,1,1.4,0L15.91,18Z">
            </path>
          </g>
        </svg>
      </div>
    </div>

    <div class="w-3/4 overflow-x-auto mt-10">
      <div class="rounded-lg shadow-sm">
        <div class="grid grid-cols-2 gap-4 px-6 py-4 border-b border-gray-200">
          <div class="text-sm font-medium text-[#8492A3]">Product Type</div>
          <div class="text-sm font-medium text-[#8492A3] text-right">
            No. of Items
          </div>
        </div>

        <div>
          <div *ngFor="let detail of packageDetails" class="grid grid-cols-2 gap-4 px-6 py-4">
            <div class="text-sm text-gray-900 dark:text-white">
              {{ detail.typeName }}
            </div>
            <div class="text-sm text-gray-900 dark:text-white text-right font-medium">
              {{ detail.qty }}
            </div>
          </div>
        </div>

        <div class="border-t border-gray-200">
          <div class="grid grid-cols-2 gap-4 px-6 py-6 border-b border-gray-200">
            <div class="text-sm text-[#3980C0] font-medium">Packaging Fee</div>
            <div class="text-sm text-[#00957D] font-medium text-right">
              Rs.{{ package?.packingFee }}
            </div>
          </div>
          <div class="grid grid-cols-2 gap-4 px-6 py-6  border-gray-200">
            <div class="text-sm text-[#3980C0] font-medium">Service Fee</div>
            <div class="text-sm text-[#00957D] font-medium text-right">
              Rs.{{ package?.serviceFee }}
            </div>
          </div>
        </div>

        <div class=" border-gray-200 mt-6">
          <h3
            class="text-lg font-normal text-textLight dark:text-textDark mb-4 border-b border-gray-300 dark:border-gray-600 pb-2">
            Defined Items on <span class="font-semibold">{{ package?.date | date: 'MMMM d, y' }}</span>
          </h3>



          <div class="overflow-x-auto">
            <table class="w-full text-sm text-left text-gray-900 dark:text-white">
              <thead class=" text-gray-700  dark:bg-gray-700" style="color: #8492A3;font-size: 16px;">
                <tr>
                  <th scope="col" class="px-6 py-3">Product Type</th>
                  <th scope="col" class="px-6 py-3">Product</th>
                  <th scope="col" class="px-6 py-3">Qty (kg)</th>
                  <th scope="col" class="px-6 py-3">Price (Rs)</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let item of packageItems" class="bg-white dark:bg-gray-800  dark:border-gray-700">
                  <td class="px-6 py-4">{{ item.productType }}</td>
                  <td class="px-6 py-4">{{ item.productName }}</td>
                  <td class="px-6 py-4">{{ item.quantity.toFixed(3) }}</td>
                  <td class="px-6 py-4">{{ formatCurrency(item.price) }}</td>

                </tr>
              </tbody>
            </table>
          </div>

          <div class="grid grid-cols-2 gap-4 px-6 py-4 mt-4">
            <div class="text-sm text-[#3980C0] font-medium">Counted Total For Today</div>
            <div class="text-sm text-[#00957D] font-medium text-right">
              Rs.{{ package?.totalPrice }}
            </div>
          </div>
        </div>
      </div>
    </div>


  </div>
</div>