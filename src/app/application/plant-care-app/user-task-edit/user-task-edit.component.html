<div>
  <button class="text-textLight dark:text-textDark" (click)="back()">
    <i class="fa-solid fa-arrow-left"></i>
    Back
  </button>
  <div class="h-[20px]"></div>
  <div class="mx-auto p-6 bg-white dark:bg-tileBlack rounded-lg shadow-md">
    <div class="flex flex-col items-center">
      <h3 class="flex mb-2 text-textLight dark:text-textDark">
        Index No :
        <p class="ml-2 font-medium text-textLight dark:text-textDark">
          {{ taskItems.taskIndex }}
        </p>
      </h3>
      <h3 class="flex text-textLight dark:text-textDark">
        Days :
        <p class="ml-2 text-textLight dark:text-textDark">
          {{ taskItems.days }}
        </p>
      </h3>
    </div>
    <div class="mb-6 bg-tileLight dark:bg-tileBlack">
      <ul class="flex">
        <li
          class="cursor-pointer py-2 px-4 text-center border-b-2 text-textLight dark:text-textDark"
          [ngClass]="{ 'border-[#3980C0]': selectedLanguage === 'english' }"
          (click)="selectLanguage('english')"
        >
          English
        </li>
        <li
          class="cursor-pointer py-2 px-4 text-center border-b-2 text-textLight dark:text-textDark"
          [ngClass]="{ 'border-[#3980C0]': selectedLanguage === 'sinhala' }"
          (click)="selectLanguage('sinhala')"
        >
          Sinhala
        </li>
        <li
          class="cursor-pointer py-2 px-4 text-center border-b-2 text-textLight dark:text-textDark"
          [ngClass]="{ 'border-[#3980C0]': selectedLanguage === 'tamil' }"
          (click)="selectLanguage('tamil')"
        >
          Tamil
        </li>
      </ul>
    </div>

    <div *ngIf="selectedLanguage === 'english'">
      <div class="mb-4">
        <label
          for="taskEnglish"
          class="block text-sm font-medium text-gray-700 dark:text-textDark"
        >
          Task English *
        </label>
       <input
  type="text"
  id="taskEnglish"
  [(ngModel)]="taskItems.taskEnglish"
  (keydown)="onKeyDown($event, taskItems.taskEnglish)"
 (input)="validateAndCapitalizeEnglish($event, 'taskEnglish')"
  #taskEnglish="ngModel"
  required
  class="mt-1 block w-full p-2 border border-gray-300 rounded-md text-textLight dark:text-textDark bg-tileLight dark:bg-tileBlack"
/>

        <div
          *ngIf="
            taskEnglish.invalid && (taskEnglish.dirty || taskEnglish.touched)
          "
          class="text-red-500 text-sm mt-1"
        >
          Task English is required
        </div>
      </div>
      <div class="mb-4">
        <label
          for="taskTypeEnglish"
          class="block text-sm font-medium text-gray-700 dark:text-textDark"
        >
          Task Type *
        </label>
      <input
  type="text"
  id="taskTypeEnglish"
  [(ngModel)]="taskItems.taskTypeEnglish"
  (keydown)="onKeyDown($event, taskItems.taskTypeEnglish)"
(input)="validateAndCapitalizeEnglish($event, 'taskTypeEnglish')"
  #taskTypeEnglish="ngModel"
  required
  class="mt-1 block w-full p-2 border border-gray-300 rounded-md text-textLight dark:text-textDark bg-tileLight dark:bg-tileBlack"
/>

        <div
          *ngIf="
            taskTypeEnglish.invalid &&
            (taskTypeEnglish.dirty || taskTypeEnglish.touched)
          "
          class="text-red-500 text-sm mt-1"
        >
          Task Type is required
        </div>
      </div>
      <div class="mb-4">
        <label
          for="taskCategoryEnglish"
          class="block text-sm font-medium text-gray-700 dark:text-textDark"
        >
          Task Category *
        </label>
        <input
          type="text"
          id="taskCategoryEnglish"
          [(ngModel)]="taskItems.taskCategoryEnglish"
          (keydown)="onKeyDown($event, taskItems.taskCategoryEnglish)"
         (input)="validateAndCapitalizeEnglish($event, 'taskCategoryEnglish')"
          #taskCategoryEnglish="ngModel"
          required
          class="mt-1 block w-full p-2 border border-gray-300 rounded-md text-textLight dark:text-textDark bg-tileLight dark:bg-tileBlack"
        />
        <div
          *ngIf="
            taskCategoryEnglish.invalid &&
            (taskCategoryEnglish.dirty || taskCategoryEnglish.touched)
          "
          class="text-red-500 text-sm mt-1"
        >
          Task Category is required
        </div>
      </div>
      <div class="mb-4">
        <label
          for="taskDescriptionEnglish"
          class="block text-sm font-medium text-gray-700 dark:text-textDark"
        >
          Task Description *
        </label>
        <input
          type="text"
          id="taskDescriptionEnglish"
          [(ngModel)]="taskItems.taskDescriptionEnglish"
          (keydown)="onKeyDown($event, taskItems.taskDescriptionEnglish)"
         (input)="validateAndCapitalizeEnglish($event, 'taskDescriptionEnglish')"
          #taskDescriptionEnglish="ngModel"
          required
          class="mt-1 block w-full p-2 border border-gray-300 rounded-md text-textLight dark:text-textDark bg-tileLight dark:bg-tileBlack"
        />
        <div
          *ngIf="
            taskDescriptionEnglish.invalid &&
            (taskDescriptionEnglish.dirty || taskDescriptionEnglish.touched)
          "
          class="text-red-500 text-sm mt-1"
        >
          Task Description is required
        </div>
      </div>
    </div>

    <div *ngIf="selectedLanguage === 'sinhala'">
      <div class="mb-4">
        <label
          for="taskSinhala"
          class="block text-sm font-medium text-gray-700 dark:text-textDark"
        >
          Task Sinhala *
        </label>
        <input
          type="text"
          id="taskSinhala"
          [(ngModel)]="taskItems.taskSinhala"
          (keydown)="onKeyDown($event, taskItems.taskSinhala)"
          #taskSinhala="ngModel"
          required
          class="mt-1 block w-full p-2 border border-gray-300 rounded-md text-textLight dark:text-textDark bg-tileLight dark:bg-tileBlack"
        />
        <div
          *ngIf="
            taskSinhala.invalid && (taskSinhala.dirty || taskSinhala.touched)
          "
          class="text-red-500 text-sm mt-1"
        >
          Task Sinhala is required
        </div>
      </div>
      <div class="mb-4">
        <label
          for="taskTypeSinhala"
          class="block text-sm font-medium text-gray-700 dark:text-textDark"
        >
          Task Type *
        </label>
        <input
          type="text"
          id="taskTypeSinhala"
          [(ngModel)]="taskItems.taskTypeSinhala"
          (keydown)="onKeyDown($event, taskItems.taskTypeSinhala)"
          #taskTypeSinhala="ngModel"
          required
          class="mt-1 block w-full p-2 border border-gray-300 rounded-md text-textLight dark:text-textDark bg-tileLight dark:bg-tileBlack"
        />
        <div
          *ngIf="
            taskTypeSinhala.invalid &&
            (taskTypeSinhala.dirty || taskTypeSinhala.touched)
          "
          class="text-red-500 text-sm mt-1"
        >
          Task Type is required
        </div>
      </div>
      <div class="mb-4">
        <label
          for="taskCategorySinhala"
          class="block text-sm font-medium text-gray-700 dark:text-textDark"
        >
          Task Category *
        </label>
        <input
          type="text"
          id="taskCategorySinhala"
          [(ngModel)]="taskItems.taskCategorySinhala"
          (keydown)="onKeyDown($event, taskItems.taskCategorySinhala)"
          #taskCategorySinhala="ngModel"
          required
          class="mt-1 block w-full p-2 border border-gray-300 rounded-md text-textLight dark:text-textDark bg-tileLight dark:bg-tileBlack"
        />
        <div
          *ngIf="
            taskCategorySinhala.invalid &&
            (taskCategorySinhala.dirty || taskCategorySinhala.touched)
          "
          class="text-red-500 text-sm mt-1"
        >
          Task Category is required
        </div>
      </div>
      <div class="mb-4">
        <label
          for="taskDescriptionSinhala"
          class="block text-sm font-medium text-gray-700 dark:text-textDark"
        >
          Task Description *
        </label>
        <input
          type="text"
          id="taskDescriptionSinhala"
          [(ngModel)]="taskItems.taskDescriptionSinhala"
          (keydown)="onKeyDown($event, taskItems.taskDescriptionSinhala)"
          #taskDescriptionSinhala="ngModel"
          required
          class="mt-1 block w-full p-2 border border-gray-300 rounded-md text-textLight dark:text-textDark bg-tileLight dark:bg-tileBlack"
        />
        <div
          *ngIf="
            taskDescriptionSinhala.invalid &&
            (taskDescriptionSinhala.dirty || taskDescriptionSinhala.touched)
          "
          class="text-red-500 text-sm mt-1"
        >
          Task Description is required
        </div>
      </div>
    </div>

    <div *ngIf="selectedLanguage === 'tamil'">
      <div class="mb-4">
        <label
          for="taskTamil"
          class="block text-sm font-medium text-gray-700 dark:text-textDark"
        >
          Task Tamil *
        </label>
        <input
          type="text"
          id="taskTamil"
          [(ngModel)]="taskItems.taskTamil"
          (keydown)="onKeyDown($event, taskItems.taskTamil)"
          #taskTamil="ngModel"
          required
          class="mt-1 block w-full p-2 border border-gray-300 rounded-md text-textLight dark:text-textDark bg-tileLight dark:bg-tileBlack"
        />
        <div
          *ngIf="taskTamil.invalid && (taskTamil.dirty || taskTamil.touched)"
          class="text-red-500 text-sm mt-1"
        >
          Task Tamil is required
        </div>
      </div>
      <div class="mb-4">
        <label
          for="taskTypeTamil"
          class="block text-sm font-medium text-gray-700 dark:text-textDark"
        >
          Task Type *
        </label>
        <input
          type="text"
          id="taskTypeTamil"
          [(ngModel)]="taskItems.taskTypeTamil"
          (keydown)="onKeyDown($event, taskItems.taskTypeTamil)"
          #taskTypeTamil="ngModel"
          required
          class="mt-1 block w-full p-2 border border-gray-300 rounded-md text-textLight dark:text-textDark bg-tileLight dark:bg-tileBlack"
        />
        <div
          *ngIf="
            taskTypeTamil.invalid &&
            (taskTypeTamil.dirty || taskTypeTamil.touched)
          "
          class="text-red-500 text-sm mt-1"
        >
          Task Type is required
        </div>
      </div>
      <div class="mb-4">
        <label
          for="taskCategoryTamil"
          class="block text-sm font-medium text-gray-700 dark:text-textDark"
        >
          Task Category *
        </label>
        <input
          type="text"
          id="taskCategoryTamil"
          [(ngModel)]="taskItems.taskCategoryTamil"
          (keydown)="onKeyDown($event, taskItems.taskCategoryTamil)"
          #taskCategoryTamil="ngModel"
          required
          class="mt-1 block w-full p-2 border border-gray-300 rounded-md text-textLight dark:text-textDark bg-tileLight dark:bg-tileBlack"
        />
        <div
          *ngIf="
            taskCategoryTamil.invalid &&
            (taskCategoryTamil.dirty || taskCategoryTamil.touched)
          "
          class="text-red-500 text-sm mt-1"
        >
          Task Category is required
        </div>
      </div>
      <div class="mb-4">
        <label
          for="taskDescriptionTamil"
          class="block text-sm font-medium text-gray-700 dark:text-textDark"
        >
          Task Description *
        </label>
        <input
          type="text"
          id="taskDescriptionTamil"
          [(ngModel)]="taskItems.taskDescriptionTamil"
          (keydown)="onKeyDown($event, taskItems.taskDescriptionTamil)"
          #taskDescriptionTamil="ngModel"
          required
          class="mt-1 block w-full p-2 border border-gray-300 rounded-md text-textLight dark:text-textDark bg-tileLight dark:bg-tileBlack"
        />
        <div
          *ngIf="
            taskDescriptionTamil.invalid &&
            (taskDescriptionTamil.dirty || taskDescriptionTamil.touched)
          "
          class="text-red-500 text-sm mt-1"
        >
          Task Description is required
        </div>
      </div>
    </div>

    <hr class="border-[2px] border-gray-400 my-10" />

    <div class="md:col-span-2 my-3">
      <label
        for="startingDate"
        class="block text-sm font-medium text-gray-700 dark:text-textDark"
        >Starting Date *
      </label>
      <p-calendar
    id="startingDate"
    [(ngModel)]="taskItems.startingDate"
    name="startingDate"
    #startingDate="ngModel"
    required
    [showIcon]="true"
    dateFormat="yy-mm-dd"
    [showButtonBar]="true"
    [monthNavigator]="true"
    [yearNavigator]="true"
    yearRange="1900:2100"
    inputId="startingDate"
    placeholder="Select Date"
    [class]="'mt-1 block w-full p-2 border border-gray-300 rounded-md text-textLight dark:text-textDark bg-tileLight dark:bg-tileBlack'"
    [style]="{'width': '100%'}"
    panelStyleClass="calendar-popup-small rounded-xl dark:bg-[#2d354d] dark:text-textDark dark:border-gray-600 
                           [&_.p-datepicker-calendar_td_span:hover]:dark:bg-[#4a5568] 
                           [&_.p-datepicker-calendar_td_span:hover]:dark:text-white
                           [&_.p-datepicker-header]:dark:bg-[#2d354d] 
                           [&_.p-datepicker-header]:dark:text-white
                           [&_.p-datepicker-buttonbar]:dark:bg-[#2d354d]
                           
                           [&_.p-button:hover]:dark:bg-[#6b7280]"
    [inputStyle]="{'width': '100%', 'border': 'none', 'background': 'transparent'}"
    [baseZIndex]="10000">
</p-calendar>
      <div
        *ngIf="
          startingDate.invalid && (startingDate.dirty || startingDate.touched)
        "
        class="text-red-500 text-sm mt-1"
      >
        Starting Date is required
      </div>
    </div>

    <div class="md:col-span-2 my-3">
      <label
        for="reqImages"
        class="block text-sm font-medium text-gray-700 dark:text-textDark"
        >Number of required images</label
      >
    
 <input
  type="text"
  id="reqImages"
  formControlName="reqImages"
  (input)="allowOnlyNumbers($event)"
  class="mt-1 block w-full p-2 border border-gray-300 rounded-md text-textLight dark:text-textDark bg-tileLight dark:bg-tileBlack"
/>

    <div class="md:col-span-2 my-3">
      <label
        class="block text-sm font-medium text-gray-700 dark:text-textDark mb-2"
      >
        Want to Add Images? *
      </label>
      <div class="flex items-center space-x-4">
        <label class="inline-flex items-center">
          <input
            type="radio"
            name="hasImageLink"
            [(ngModel)]="hasImageLink"
            [value]="true"
            (change)="onImageLinkChange(true)"
            class="text-[#3980C0] focus:ring-[#3980C0]"
          />
          <span class="ml-2 text-textLight dark:text-textDark">Yes</span>
        </label>
        <label class="inline-flex items-center">
          <input
            type="radio"
            name="hasImageLink"
            [(ngModel)]="hasImageLink"
            [value]="false"
            (change)="onImageLinkChange(false)"
            class="text-[#3980C0] focus:ring-[#3980C0]"
          />
          <span class="ml-2 text-textLight dark:text-textDark">No</span>
        </label>
      </div>
    </div>

    <div class="md:col-span-2 my-3" *ngIf="hasImageLink">
      <label
        for="imageLink"
        class="block text-sm font-medium text-gray-700 dark:text-textDark"
        >Link for Images *</label
      >
      <input
        min="0"
        id="imageLink"
        [(ngModel)]="taskItems.imageLink"
        name="imageLink"
        #imageLink="ngModel"
        [required]="hasImageLink"
        rows="3"
        class="mt-1 block w-full p-2 border border-gray-300 rounded-md text-textLight dark:text-textDark bg-tileLight dark:bg-tileBlack"
      />
      <div
        *ngIf="imageLink.invalid && (imageLink.dirty || imageLink.touched)"
        class="text-red-500 text-sm mt-1"
      >
        Image Link is required when "Want to Add Images?" is Yes
      </div>
    </div>

   <div class="md:col-span-2 my-3">
  <label class="block text-sm font-medium text-gray-700 dark:text-textDark mb-2">
    Want to Add Videos? *
  </label>
  <div class="flex items-center space-x-4">
    <label class="inline-flex items-center">
      <input
        type="radio"
        name="hasVideoLink"
        [(ngModel)]="hasVideoLink"
        [value]="true"
        (change)="onVideoLinkChange(true)"
        class="text-[#3980C0] focus:ring-[#3980C0]"
      />
      <span class="ml-2 text-textLight dark:text-textDark">Yes</span>
    </label>
    <label class="inline-flex items-center">
      <input
        type="radio"
        name="hasVideoLink"
        [(ngModel)]="hasVideoLink"
        [value]="false"
        (change)="onVideoLinkChange(false)"
        class="text-[#3980C0] focus:ring-[#3980C0]"
      />
      <span class="ml-2 text-textLight dark:text-textDark">No</span>
    </label>
  </div>
</div>

<!-- Conditional video fields -->
<div class="md:col-span-2 my-3" *ngIf="hasVideoLink">
  <label for="videoLinkEnglish" class="block text-sm font-medium text-gray-700 dark:text-textDark">
    Video Link English *
  </label>
  <input
    id="videoLinkEnglish"
    [(ngModel)]="taskItems.videoLinkEnglish"
    name="videoLinkEnglish"
    class="mt-1 block w-full p-2 border border-gray-300 rounded-md text-textLight dark:text-textDark bg-tileLight dark:bg-tileBlack"
  />

  <label for="videoLinkSinhala" class="block text-sm font-medium text-gray-700 dark:text-textDark mt-3">
    Video Link Sinhala *
  </label>
  <input
    id="videoLinkSinhala"
    [(ngModel)]="taskItems.videoLinkSinhala"
    name="videoLinkSinhala"
    class="mt-1 block w-full p-2 border border-gray-300 rounded-md text-textLight dark:text-textDark bg-tileLight dark:bg-tileBlack"
  />

  <label for="videoLinkTamil" class="block text-sm font-medium text-gray-700 dark:text-textDark mt-3">
    Video Link Tamil *
  </label>
  <input
    id="videoLinkTamil"
    [(ngModel)]="taskItems.videoLinkTamil"
    name="videoLinkTamil"
    class="mt-1 block w-full p-2 border border-gray-300 rounded-md text-textLight dark:text-textDark bg-tileLight dark:bg-tileBlack"
  />
</div>

    <div class="flex justify-end mt-6">
      <div class="w-[20px]"></div>
         <button
          type="button"
          class="px-4 py-2 bg-[#74788D] text-white rounded-md mr-2"
          (click)="onCancel()"
        >
          Cancel
        </button>
      <button
        class="px-4 py-2 bg-[#3980C0] text-white rounded-md"
        type="button"
        (click)="updateTask()"
      >
        Save
      </button>
    </div>
  </div>
</div>
