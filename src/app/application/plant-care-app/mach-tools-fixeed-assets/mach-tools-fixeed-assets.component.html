<app-loading-spinner *ngIf="isLoading"></app-loading-spinner>

<button class="mb-5 text-black dark:text-textDark" onclick="history.back()">
  <i class="fa-solid fa-arrow-left"></i>
  Back
</button>

<div class="pt-5 pr-12 pl-12 pb-5 w-100 bg-white dark:bg-tileBlack shadow-lg rounded-lg">
  <!-- Header section with farmer info and category -->
  <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 mb-6">
    <div class="flex items-center justify-between">
      <div class="flex items-center space-x-4">
        <div class="flex items-center space-x-2">
          <span class="text-black dark:text-gray-300 font-medium">Farmer :</span>
          <span class="text-black dark:text-textDark font-semibold">{{ fullName || 'NULL' }}</span>
        </div>
      </div>
      <div class="flex items-center space-x-2">
        <span class="text-black dark:text-gray-300 font-medium">Category :</span>
        <span class="text-black dark:text-textDark font-semibold">{{ category || 'NULL' }}</span>
      </div>
    </div>

    <div class="mt-4">
      <div class="flex items-center space-x-2">
        <span class="text-black dark:text-gray-300 font-medium">Farm :</span>
        <span class="text-black dark:text-textDark font-semibold">{{ farmName || 'NULL' }}</span>
      </div>
    </div>
  </div>

  <div *ngIf="!hasData" class="flex flex-col justify-center items-center py-12">
        <p class="text-gray-500 dark:text-textDark text-lg mb-4">-- No Data Available --</p>
        <img src="assets/images/NoData.png" alt="No Data" class="w-20 h-20" />
    </div>

  <div *ngIf="hasData" class="overflow-x-auto">
    <table class="w-full divide-y divide-gray-200 table-auto">
      <thead>
        <tr>
          <th class="px-4 py-3 font-normal text-gray-500 dark:text-textDark text-center">Asset Name</th>
          <th class="px-4 py-3 font-normal text-gray-500 dark:text-textDark text-center">Asset Type</th>
          <th class="px-4 py-3 font-normal text-gray-500 dark:text-textDark text-center">Other Type</th>
          <th class="px-4 py-3 font-normal text-gray-500 dark:text-textDark text-center">No.of Units</th>
          <th class="px-4 py-3 font-normal text-gray-500 dark:text-textDark text-center">Unit Price</th>
          <th class="px-4 py-3 font-normal text-gray-500 dark:text-textDark text-center">Total Price</th>
          <th class="px-4 py-3 font-normal text-gray-500 dark:text-textDark text-center">Warranty</th>
          <th class="px-4 py-3 font-normal text-gray-500 dark:text-textDark text-center">Warranty Status</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of fixedAssetB">
          <td class="px-4 py-3 text-gray-500 dark:text-textDark text-center">{{ item.asset || 'NULL' }}</td>
          <td class="px-4 py-3 text-gray-500 dark:text-textDark text-center">{{ item.assetType || 'NULL' }}</td>
          <td class="px-4 py-3 text-gray-500 dark:text-textDark text-center">{{ item.mentionOther || 'NULL' }}</td>
          <td class="px-4 py-3 text-gray-500 dark:text-textDark text-center">{{ item.numberOfUnits || 'NULL' }}</td>
          <td class="px-4 py-3 text-gray-500 dark:text-textDark text-center">
            {{ item.unitPrice ? 'Rs. ' + item.unitPrice : 'NULL' }}
          </td>
          <td class="px-4 py-3 text-gray-500 dark:text-textDark text-center">
            {{ item.totalPrice ? 'Rs. ' + item.totalPrice : 'NULL' }}
          </td>
          <td class="px-4 py-3 text-gray-500 dark:text-textDark text-center" style="text-transform: capitalize;">
            {{ item.warranty || 'NULL' }}
          </td>
          <td class="px-4 py-3 text-center">
            <!-- Expired Status -->
            <div *ngIf="item.warrantystatus === 'Expired' || item.warrantystatus === 'expired'">
              <span class="inline-block font-medium rounded-md px-3 py-1 text-sm text-red-700" 
                    style="background-color: #FFB9B7;">
                {{ item.warrantystatus }}
              </span>
            </div>
            <!-- Under Warranty Status -->
            <div *ngIf="item.warrantystatus === 'Under warranty' || item.warrantystatus === 'under warranty'">
              <span class="inline-block font-medium rounded-md px-3 py-1 text-sm text-green-700 whitespace-nowrap" 
                    style="background-color: #BBFFC6;">
                {{ item.warrantystatus }}
              </span>
            </div>
            <!-- No Data Status or NULL -->
            <div *ngIf="item.warrantystatus !== 'Under warranty' && item.warrantystatus !== 'under warranty' && item.warrantystatus !== 'Expired' && item.warrantystatus !== 'expired'">
              <span class="inline-block font-medium rounded-md px-3 py-1 text-sm text-gray-500 dark:text-textDark bg-transparent">
                {{ item.warrantystatus || 'NULL' }}
              </span>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>