<app-loading-spinner *ngIf="isLoading"></app-loading-spinner>

<button class="mb-5 text-textLight dark:text-textDark" onclick="history.back()">
  <i class="fa-solid fa-arrow-left"></i>
  Back
</button>

<div class="fixed-width-container overflow-x-auto scrollbar-thin scrollbar-thumb-scrollBarColor scrollbar-track-transparent scrollbar-thumb-rounded-full">
  <div class="pt-5 pb-5 min-w-[1200px] bg-white dark:bg-tileBlack shadow-lg rounded-lg">
    <!-- Header Section -->
    <div class="flex justify-between items-center pb-5 pr-12 pl-12 border-b border-gray-300">
      <h2 class="text-lg font-semibold text-gray-800 dark:text-gray-200">{{ storeName }}</h2>
      <p class="text-sm text-gray-600 dark:text-gray-400">{{ receivedDate }}</p>
    </div>
    
    <!-- Pickup Orders Section -->
    <div class="px-12 py-6 border-b border-gray-300">
      <!-- Pickup Header -->
      <div class="flex justify-between items-center mb-6">
        <div class="flex items-center gap-3">
          <span class="text-base text-gray-700 dark:text-gray-300">Total Pickup Order Income Today :</span>
          <span class="text-base font-bold text-gray-900 dark:text-white">{{ formatCurrency(totalPickupIncome) }}</span>
        </div>
        <button 
          (click)="viewPickupRevenue()"
          class="text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 flex items-center gap-1 text-sm font-medium">
          View Pickup Revenue
          <i class="fa-solid fa-arrow-up-right-from-square text-xs"></i>
        </button>
      </div>
      
      <!-- Pickup Metrics Grid -->
      <div class="grid grid-cols-3 gap-4">
        <div *ngFor="let metric of pickupMetrics" class="relative flex flex-col rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden">
          <div class="flex items-center justify-between p-3">
            <span class="text-sm text-gray-700 dark:text-gray-300">{{ metric.label }}</span>
            <div class="flex items-center justify-center w-10 h-10 rounded-full bg-gray-700 dark:bg-gray-600">
              <span class="text-white font-semibold text-sm">{{ metric.count }}</span>
            </div>
          </div>
          <!-- Colored Bottom Border -->
          <div class="h-1 w-full" [style.background-color]="metric.color"></div>
        </div>
      </div>
    </div>
    
    <!-- Delivery Orders Section -->
    <div class="px-12 py-6">
      <!-- Delivery Header -->
      <div class="flex justify-between items-center mb-6">
        <div class="flex items-center gap-3">
          <span class="text-base text-gray-700 dark:text-gray-300">Total Delivery Order Income Today :</span>
          <span class="text-base font-bold text-gray-900 dark:text-white">{{ formatCurrency(totalDeliveryIncome) }}</span>
        </div>
        <button 
          (click)="viewDeliveryRevenue()"
          class="text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 flex items-center gap-1 text-sm font-medium">
          View Delivery Revenue
          <i class="fa-solid fa-arrow-up-right-from-square text-xs"></i>
        </button>
      </div>
      
      <!-- Delivery Metrics Grid -->
      <div class="grid grid-cols-3 gap-4">
        <div *ngFor="let metric of deliveryMetrics" class="relative flex flex-col rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden">
          <div class="flex items-center justify-between p-3">
            <span class="text-sm text-gray-700 dark:text-gray-300">{{ metric.label }}</span>
            <div class="flex items-center justify-center w-10 h-10 rounded-full bg-gray-700 dark:bg-gray-600">
              <span class="text-white font-semibold text-sm">{{ metric.count }}</span>
            </div>
          </div>
          <!-- Colored Bottom Border -->
          <div class="h-1 w-full" [style.background-color]="metric.color"></div>
        </div>
      </div>
    </div>
  </div>
</div>