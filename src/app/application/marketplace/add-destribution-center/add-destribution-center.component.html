<app-loading-spinner *ngIf="isLoading"></app-loading-spinner>

<button class="mb-2 mt-0 text-textLight dark:text-textDark" (click)="back()">
  <i class="fa-solid fa-arrow-left"></i>
  Back
</button>

<div class="w-full mx-auto pt-6 py-6 px-12 bg-white rounded-lg shadow-md">
    <h2 class="font-medium text-[#292929] mb-6">Add Distribution Centre</h2>

    <form [formGroup]="distributionForm" (ngSubmit)="onSubmit()">
        <!-- Row 1 -->
        <div class="flex flex-col md:flex-row md:space-x-4 mb-4 gap-8">
            <div class="flex-1 mb-4 md:mb-0">
                <label class="block text-sm font-medium text-[#534E4E] mb-2">Distribution Centre Name *</label>
                <input type="text" formControlName="name" [class]="'w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ' + 
                    (isFieldInvalid('name') ? 'border-red-500' : 'border-gray-300')">
                <div *ngIf="isFieldInvalid('name')" class="text-red-500 text-sm mt-1">
                    {{ getFieldError('name') }}
                </div>
            </div>

            <div class="flex-1">
                <label class="block text-sm font-medium text-[#534E4E] mb-2">Officer In-Charge Name *</label>
                <input type="text" formControlName="officerInCharge" [class]="'w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ' + 
                    (isFieldInvalid('officerInCharge') ? 'border-red-500' : 'border-gray-300')">
                <div *ngIf="isFieldInvalid('officerInCharge')" class="text-red-500 text-sm mt-1">
                    {{ getFieldError('officerInCharge') }}
                </div>
            </div>
        </div>

        <!-- Row 2 -->
        <div class="flex flex-col md:flex-row md:space-x-4 mb-4 gap-8">
            <div class="flex-1 mb-4 md:mb-0">
                <label class="block text-sm font-medium text-[#534E4E] mb-2">Contact Number 01 *</label>
                <div class="flex">
                    <select formControlName="contact1Code"
                        class="px-3 py-2 text-[#534E4E] bg-gray-100 border border-r-0 border-gray-300 rounded-l-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option *ngFor="let code of phoneCodes" [value]="code.value">{{ code.label }}</option>
                    </select>
                    <input type="tel" formControlName="contact1" placeholder="XXXXXXXXX" [class]="'flex-1 px-3 py-2 border rounded-r-md focus:outline-none focus:ring-2 focus:ring-blue-500 ' + 
                        (isFieldInvalid('contact1') ? 'border-red-500' : 'border-gray-300')">
                </div>
                <div *ngIf="isFieldInvalid('contact1')" class="text-red-500 text-sm mt-1">
                    {{ getFieldError('contact1') }}
                </div>
            </div>

            <div class="flex-1">
                <label class="block text-sm font-medium text-[#534E4E] mb-2">Contact Number 02 *</label>
                <div class="flex">
                    <select formControlName="contact2Code"
                        class="px-3 py-2 text-[#534E4E] bg-gray-100 border border-r-0 border-gray-300 rounded-l-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option *ngFor="let code of phoneCodes" [value]="code.value">{{ code.label }}</option>
                    </select>
                    <input type="tel" formControlName="contact2" placeholder="XXXXXXXXX" [class]="'flex-1 px-3 py-2 border rounded-r-md focus:outline-none focus:ring-2 focus:ring-blue-500 ' + 
                        (isFieldInvalid('contact2') ? 'border-red-500' : 'border-gray-300')">
                </div>
                <div *ngIf="isFieldInvalid('contact2')" class="text-red-500 text-sm mt-1">
                    {{ getFieldError('contact2') }}
                </div>
            </div>
        </div>

        <!-- Row 3 -->
        <div class="flex flex-col md:flex-row md:space-x-4 mb-4 gap-8">
            <div class="flex-1 mb-4 md:mb-0">
                <label class="block text-sm font-medium text-[#534E4E] mb-2">Latitude *</label>
                <input type="text" formControlName="latitude" placeholder="e.g., 6.9271" [class]="'w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ' + 
                    (isFieldInvalid('latitude') ? 'border-red-500' : 'border-gray-300')">
                <div *ngIf="isFieldInvalid('latitude')" class="text-red-500 text-sm mt-1">
                    {{ getFieldError('latitude') }}
                </div>
            </div>

            <div class="flex-1">
                <label class="block text-sm font-medium text-[#534E4E] mb-2">Longitude *</label>
                <input type="text" formControlName="longitude" placeholder="e.g., 79.8612" [class]="'w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ' + 
                    (isFieldInvalid('longitude') ? 'border-red-500' : 'border-gray-300')">
                <div *ngIf="isFieldInvalid('longitude')" class="text-red-500 text-sm mt-1">
                    {{ getFieldError('longitude') }}
                </div>
            </div>
        </div>

        <!-- Row 4 -->
        <div class="flex flex-col md:flex-row md:space-x-4 mb-4 gap-8">
            <div class="flex-1 mb-4 md:mb-0">
                <label class="block text-sm font-medium text-[#534E4E] mb-2">Email *</label>
                <input type="email" formControlName="email" [class]="'w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ' + 
                    (isFieldInvalid('email') ? 'border-red-500' : 'border-gray-300')">
                <div *ngIf="isFieldInvalid('email')" class="text-red-500 text-sm mt-1">
                    {{ getFieldError('email') }}
                </div>
            </div>

            <div class="flex-1">
                <label class="block text-sm font-medium text-[#534E4E] mb-2">Country *</label>
                <select formControlName="country" [class]="'w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ' + 
                    (isFieldInvalid('country') ? 'border-red-500' : 'border-gray-300')">
                    <option value="" disabled>Select Country</option>
                    <option value="Sri Lanka">Sri Lanka</option>
                </select>
                <div *ngIf="isFieldInvalid('country')" class="text-red-500 text-sm mt-1">
                    {{ getFieldError('country') }}
                </div>
            </div>
        </div>

        <!-- Row 5 -->
        <div class="flex flex-col md:flex-row md:space-x-4 mb-4 gap-8">
            <div class="flex-1 mb-4 md:mb-0">
                <label class="block text-sm font-medium text-[#534E4E] mb-2">Province *</label>
                <select formControlName="province" [class]="'w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ' + 
                    (isFieldInvalid('province') ? 'border-red-500' : 'border-gray-300')">
                    <option value="">Select Province</option>
                    <option *ngFor="let province of provinces" [value]="province">{{ province }}</option>
                </select>
                <div *ngIf="isFieldInvalid('province')" class="text-red-500 text-sm mt-1">
                    {{ getFieldError('province') }}
                </div>
            </div>

            <div class="flex-1">
                <label class="block text-sm font-medium text-[#534E4E] mb-2">District *</label>
                <select formControlName="district" [class]="'w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ' + 
                    (isFieldInvalid('district') ? 'border-red-500' : 'border-gray-300')">
                    <option value="" disabled>Select District</option>
                    <option *ngFor="let district of getDistricts()" [value]="district">{{ district }}</option>
                </select>
                <div *ngIf="isFieldInvalid('district')" class="text-red-500 text-sm mt-1">
                    {{ getFieldError('district') }}
                </div>
            </div>
        </div>

        <!-- Row 6 -->
        <div class="flex flex-col md:flex-row md:space-x-4 mb-6 gap-8">
            <div class="flex-1 mb-4 md:mb-0">
                <label class="block text-sm font-medium text-[#534E4E] mb-2">City *</label>
                <input type="text" formControlName="city" [class]="'w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ' + 
                    (isFieldInvalid('city') ? 'border-red-500' : 'border-gray-300')">
                <div *ngIf="isFieldInvalid('city')" class="text-red-500 text-sm mt-1">
                    {{ getFieldError('city') }}
                </div>
            </div>
            <div class="flex-1 mb-4 md:mb-0">

            </div>
        </div>

        <!-- Buttons -->
        <div class="flex justify-end space-x-4 pt-6">
            <button type="button" (click)="onCancel()"
                class="px-4 w-30 py-2 bg-[#74788D] border border-gray-300 rounded-md text-[#D3D3D3] focus:outline-none focus:ring-2 focus:ring-blue-500">
                Cancel
            </button>
            <button type="submit" 
                [class]="'px-4 min-w-30 py-2 bg-[#3980C0] rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-[#D3D3D3] ' + 
                (distributionForm.invalid ? 'bg-gray-400 text-gray-700 cursor-not-allowed' : 'bg-[#3980C0] text-white  hover:bg-[#3980C0]')">
                Save
            </button>
        </div>
    </form>
</div>

<!-- [disabled]="distributionForm.invalid" -->