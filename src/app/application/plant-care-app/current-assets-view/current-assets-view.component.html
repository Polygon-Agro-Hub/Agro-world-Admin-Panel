<app-loading-spinner *ngIf="isLoading"></app-loading-spinner>

<div *ngIf="!isLoading">
  <button
    class="mb-5 text-textLight dark:text-textDark"
    onclick="history.back()"
  >
    <i class="fa-solid fa-arrow-left"></i>
    Back
  </button>

  <div
    class="pt-5 pr-12 pl-12 pb-10 w-100 bg-white dark:bg-tileBlack shadow-lg rounded-lg"
  >
<div class="flex flex-row justify-between">
  <!-- Left: Farmer -->
  <div class="flex items-center space-x-1">
    <span class="font-medium dark:text-textDark">Farmer:</span>
    <span class="font-semibold dark:text-textDark">{{ name || 'NULL' }}</span>
  </div>

  <!-- Right: Category -->
  <div class="flex items-center space-x-1">
    <span class="font-medium dark:text-textDark">Category:</span>
    <span class="font-semibold dark:text-textDark">{{ category || 'NULL' }}</span>
  </div>
</div>

<div class="flex items-center space-x-1">
  <span class="font-medium dark:text-textDark">Farm:</span>
  <span class="font-semibold dark:text-textDark">{{ farmName || 'NULL' }}</span>
</div>










    <!-- Show only when there is no data -->
    <div *ngIf="!hasData" class="text-center py-8">
      <p class="text-gray-500 text-lg dark:text-textDark">-- No Data Available --</p>
      <img src="assets/images/NoData.png" alt="No Data" class="w-20 h-20 mt-4 mx-auto" />
    </div>

    <!-- Table when data is available -->
    <div *ngIf="hasData" class="overflow-x-auto">
      <table class="min-w-full divide-y divide-gray-200 table-auto whitespace-nowrap">
        <thead>
          <tr>
            <th class="py-3 font-normal text-gray-500 dark:text-textDark text-left">
              Asset Name
            </th>
            <th class="px-4 py-3 font-normal text-gray-500 dark:text-textDark text-left whitespace-nowrap">
              Brand
            </th>
            <th class="px-4 py-3 font-normal text-gray-500 dark:text-textDark text-left whitespace-nowrap">
              Batch No.
            </th>
            <th class="px-4 py-3 font-normal text-gray-500 dark:text-textDark text-center">
              Volume/Weight
            </th>
            <th class="px-4 py-3 font-normal text-gray-500 dark:text-textDark text-center">
              Unit
            </th>
            <th class="px-4 py-3 font-normal text-gray-500 dark:text-textDark text-left">
              No. of Units
            </th>
            <th class="px-4 py-3 font-normal text-gray-500 dark:text-textDark text-center">
              Unit Price
            </th>
            <th class="px-4 py-3 font-normal text-gray-500 dark:text-textDark text-center">
              Total Price
            </th>
            <th class="px-4 py-3 font-normal text-gray-500 dark:text-textDark text-center">
              Warranty Status
            </th>
            <th class="px-4 py-3 font-normal text-gray-500 dark:text-textDark text-center">
              View
            </th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of currentAsset" class="border-b">
            <td class="py-3 dark:text-textDark">{{ item.asset }}</td>
            <td class="px-4 py-3 dark:text-textDark text-left whitespace-nowrap">
              {{ item.brand }}
            </td>
            <td class="px-4 py-3 dark:text-textDark text-left whitespace-nowrap">
              {{ item.batchNum }}
            </td>
            <td class="px-4 py-3 dark:text-textDark text-center">
              {{ item.unitVolume | number }}
            </td>
            <td class="px-4 py-3 dark:text-textDark text-center">
              {{ item.unit }}
            </td>
            <td class="px-4 py-3 dark:text-textDark text-left">
              {{ item.numOfUnit | number }}
            </td>
            <td class="px-4 py-3 dark:text-textDark text-center">
              {{ item.unitPrice | number: '1.0-2' }}
            </td>
            <td class="px-4 py-3 dark:text-textDark text-center">
              {{ item.total | number: '1.0-2' }}
            </td>
            <td class="px-4 py-3 dark:text-textDark text-center">
              <div *ngIf="item.status == 'Still valid'">
                <span
                  class="w-24 h-7 inline-block bg-green-100 text-green-500 font-medium rounded-md px-3 py-1 text-sm"
                >
                  {{ item.status }}
                </span>
              </div>
              <div *ngIf="item.status == 'Expired'">
                <span
                  class="w-24 h-7 inline-block bg-red-100 text-red-500 font-medium rounded-md px-3 py-1 text-sm"
                >
                  {{ item.status }}
                </span>
              </div>
            </td>
            <td class="px-4 py-3 text-center">
              <button
                class="w-5 h-5 text-blue-500 hover:text-blue-700"
                (click)="viewRecord(item.id, name, category, item.asset, item.unit, item.unitPrice, item.batchNum)"
              >
                <svg
                  viewBox="0 0 24 24"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M3 14C3 9.02944 7.02944 5 12 5C16.9706 5 21 9.02944 21 14M17 14C17 16.7614 14.7614 19 12 19C9.23858 19 7 16.7614 7 14C7 11.2386 9.23858 9 12 9C14.7614 9 17 11.2386 17 14Z"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
