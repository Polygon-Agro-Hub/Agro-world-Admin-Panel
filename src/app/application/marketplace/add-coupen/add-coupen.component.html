<button (click)="back()" class="mb-5 text-textLight dark:text-textDark">
  <i class="fa-solid fa-arrow-left"></i> Back
</button>

<form (ngSubmit)="onSubmit()">
  <!-- save button -->
  <div class="flex flex-row justify-between items-center mb-6 pr-4">
    <p class="text-lg text-textLight dark:text-textDark font-semibold">
      Add a Coupon
    </p>
    <div>
      <span
        class="bg-[#74788D] text-lg text-white px-3 py-2 rounded-lg mx-2 cursor-pointer"
        onclick="history.back()"
      >
        Cancel
      </span>
      <span
        class="bg-[#3980C0] text-lg text-white px-5 py-2 rounded-lg mx-2 cursor-pointer"
        (click)="onSubmit()"
      >
        Save
      </span>
    </div>
  </div>

  <div class="flex flex-row justify-between">
    <div
      class="bg-[#FFFFFF] dark:bg-tileBlack px-20 pt-12 pb-12 shadow-md rounded-md w-[60%] h-full"
    >
      <div class="mb-8">
        <label class="text-[#534E4E] dark:text-textDark">Code *</label>
        <input
          type="text"
          id="code"
          name="code"
          [(ngModel)]="coupenObj.code"
          (input)="onCodeInput($event)"
          class="mt-1 block w-full p-2 border border-gray-300 rounded-md text-textLight dark:text-textDark bg-tileLight dark:bg-tileBlack"
        />
      </div>

      <div class="mb-16">
        <label class="text-[#534E4E] dark:text-textDark">Type *</label>
        <div class="flex items-center space-x-4 mt-3">
          <div class="flex items-center space-x-2">
            <!-- Percentage Radio Button -->
            <input
              class="w-5 h-5 cursor-pointer accent-[#0021F5]"
              type="radio"
              id="percentage"
              name="type"
              [value]="'Percentage'"
              [(ngModel)]="coupenObj.type"
              (change)="clearValidationMessages()"
            />
            <label
              for="percentage"
              class="block text-sm font-medium text-gray-700 dark:text-textDark"
            >
              Percentage
            </label>
          </div>
          <div class="flex items-center space-x-2">
            <!-- Fixed Amount Radio Button -->
            <input
              class="w-5 h-5 cursor-pointer accent-[#0021F5]"
              type="radio"
              id="fixedAmount"
              name="type"
              [value]="'Fixed Amount'"
              [(ngModel)]="coupenObj.type"
              (change)="clearValidationMessages()"
            />
            <label
              for="fixedAmount"
              class="block text-sm font-medium text-gray-700 dark:text-textDark"
            >
              Fixed Amount
            </label>
          </div>
          <div class="flex items-center space-x-2">
            <!-- Free Delivery Radio Button -->
            <input
              class="w-5 h-5 cursor-pointer accent-[#0021F5]"
              type="radio"
              id="freeDelivery"
              name="type"
              [(ngModel)]="coupenObj.type"
              [value]="'Free Delivary'"
              (change)="clearValidationMessages()"
            />
            <label
              for="freeDelivery"
              class="block text-sm font-medium text-gray-700 dark:text-textDark"
            >
              Free Delivery
            </label>
          </div>
        </div>
      </div>

      <div *ngIf="coupenObj.type === 'Percentage'" class="mb-6">
        <label class="text-[#534E4E] dark:text-textDark">Discount Percentage *</label>
        <input
          type="number"
          id="percentage"
          name="percentage"
          [(ngModel)]="coupenObj.percentage"
          min="0"
          max="100"
          class="mt-1 block w-full p-2 border border-gray-300 rounded-md text-textLight dark:text-textDark bg-tileLight dark:bg-tileBlack"
          (change)="checkPrecentageValue(coupenObj.percentage)"
          (keydown)="preventNegative($event)"
        />
        <div *ngIf="coupenObj.type === 'Percentage'" class="text-red-500 text-sm mt-1">
          <div>{{ checkPrecentageValueMessage }}</div>
        </div>
      </div>

      <div *ngIf="coupenObj.type === 'Fixed Amount'" class="mb-6">
        <label class="text-[#534E4E] dark:text-textDark">Discount Amount *</label>
        <input
          type="number"
          id="fixDiscount"
          name="fixDiscount"
          [(ngModel)]="coupenObj.fixDiscount"
          min="0"
          (change)="checkFixAmountValue(coupenObj.fixDiscount)"
          class="mt-1 block w-full p-2 border border-gray-300 rounded-md text-textLight dark:text-textDark bg-tileLight dark:bg-tileBlack"
        />
        <div *ngIf="coupenObj.type === 'Fixed Amount'" class="text-red-500 text-sm mt-1">
          <div>{{ checkfixAmountValueMessage }}</div>
        </div>
      </div>

      <div class="flex flex-row mb-6">
        <input
          type="checkbox"
          id="checkLimit"
          name="checkLimit"
          [(ngModel)]="coupenObj.checkLimit"
          [value]="true"
          class="mr-6 ml-2 border border-gray-300 rounded-md text-textLight dark:text-textDark bg-tileLight dark:bg-tileBlack transform scale-150 cursor-pointer accent-[#0021F5]"
        />

        <label for="chekLimit" class="text-[#534E4E] dark:text-textDark">
          Set Price Limit (ex : This Coupon valid only for more than Rs.5000 Orders)
        </label>
      </div>

      <div *ngIf="coupenObj.checkLimit" class="mb-6">
        <label class="text-[#534E4E] dark:text-textDark">Price Limit *</label>
        <input
          type="number"
          id="priceLimit"
          name="priceLimit"
          [(ngModel)]="coupenObj.priceLimit"
          min="0"
          class="mt-1 block w-full p-2 border border-gray-300 rounded-md text-textLight dark:text-textDark bg-tileLight dark:bg-tileBlack"
        />
      </div>
    </div>

    <div class="flex flex-col justify-start px-6 w-[40%]">
      <div
        class="bg-[#FFFFFF] dark:bg-tileBlack rounded-lg shadow-lg px-12 py-8"
      >
        <label class="text-[#000000] dark:text-textDark font-normal text-1xl"
          >Status *</label
        >
        <div class="flex items-center space-x-2 my-5">
          <!-- With Discount Radio Button -->
          <input
            class="w-5 h-5 cursor-pointer accent-[#0021F5]"
            type="radio"
            id="status"
            name="status"
            [value]="'Enabled'"
            [(ngModel)]="coupenObj.status"
          />
          <label
            for="withDiscount"
            class="block text-sm font-medium text-gray-700 dark:text-textDark"
          >
            Enabled
          </label>
        </div>

        <div class="flex items-center space-x-2 my-5">
          <input
            class="w-5 h-5 cursor-pointer accent-[#0021F5]"
            type="radio"
            id="status"
            name="status"
            [value]="'Disabled'"
            [(ngModel)]="coupenObj.status"
          />
          <label
            for="withDiscount"
            class="block text-sm font-medium text-gray-700 dark:text-textDark"
          >
            Disabled
          </label>
        </div>
      </div>

      <div
        class="bg-[#FFFFFF] dark:bg-tileBlack rounded-lg shadow-lg px-12 py-8 mt-4"
      >
        <label class="text-[#000000] dark:text-textDark font-normal text-1xl"
          >Schedule</label
        >
        <p class="text-[#838383] dark:text-textDark text-sm mt-2 mb-5">
          Settings to limit the coupon expiration date.
        </p>

        <div class="mb-6">
          <label class="text-textLight dark:text-textDark font-medium"
            >Start Date *</label
          >
          <p-calendar
            id="startDate"
            name="startDate"
            [(ngModel)]="coupenObj.startDate"
            (onSelect)="checkStartDate()"
            placeholder="Start Date"
            [showIcon]="true"
            [showClear]="true"
            [showButtonBar]="true"
            iconDisplay="input"
            [style]="{ width: '100%' }"
            panelStyleClass="calendar-popup-small rounded-xl dark:bg-[#2d354d] dark:text-textDark dark:border-gray-600 
                     [&_.p-datepicker-calendar_td_span:hover]:dark:bg-[#4a5568] 
                     [&_.p-datepicker-calendar_td_span:hover]:dark:text-white
                     [&_.p-datepicker-header]:dark:bg-[#2d354d] 
                     [&_.p-datepicker-header]:dark:text-white
                     [&_.p-datepicker-buttonbar]:dark:bg-[#2d354d]"
            inputStyleClass="mt-2 block w-full p-2 border border-gray-300 rounded-md text-textLight dark:text-textDark bg-tileLight dark:bg-tileBlack"
            [appendTo]="'body'"
          />
        </div>

        <div class="mb-6">
          <label class="text-textLight dark:text-textDark font-medium"
            >Expire Date *</label
          >
          <p-calendar
            id="endDate"
            name="endDate"
            [(ngModel)]="coupenObj.endDate"
            (onSelect)="checkExpireDate()"
            placeholder="End Date"
            [showIcon]="true"
            [showClear]="true"
            [showButtonBar]="true"
            iconDisplay="input"
            [style]="{ width: '100%' }"
            panelStyleClass="calendar-popup-small rounded-xl dark:bg-[#2d354d] dark:text-textDark dark:border-gray-600 
                     [&_.p-datepicker-calendar_td_span:hover]:dark:bg-[#4a5568] 
                     [&_.p-datepicker-calendar_td_span:hover]:dark:text-white
                     [&_.p-datepicker-header]:dark:bg-[#2d354d] 
                     [&_.p-datepicker-header]:dark:text-white
                     [&_.p-datepicker-buttonbar]:dark:bg-[#2d354d]"
            inputStyleClass="mt-2 block w-full p-2 border border-gray-300 rounded-md text-textLight dark:text-textDark bg-tileLight dark:bg-tileBlack"
            [appendTo]="'body'"
          />
        </div>
      </div>
    </div>
  </div>
</form>