<app-loading-spinner *ngIf="isLoading"></app-loading-spinner>

<button class="mb-5 text-textLight dark:text-textDark" onclick="history.back()">
  <i class="fa-solid fa-arrow-left"></i>
  Back
</button>

<div class="pt-5 pr-12 pl-12 pb-5 w-100 bg-white dark:bg-tileBlack shadow-lg rounded-lg">
  <!-- Header section with farmer info and category -->
  <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 mb-6">
    <div class="flex items-center justify-between">
      <div class="flex items-center space-x-4">
        <div class="flex items-center space-x-2">
          <span class="text-gray-600 dark:text-gray-300 font-medium">Farmer :</span>
          <span class="text-textLight dark:text-textDark font-semibold">{{ fullName }}</span>
        </div>
      </div>
      <div class="flex items-center space-x-2">
        <span class="text-gray-600 dark:text-gray-300 font-medium">Category :</span>
        <span class="text-textLight dark:text-textDark font-semibold">{{ category }}</span>
      </div>
    </div>

    <div class="mt-4">
      <div class="flex items-center space-x-2">
        <span class="text-gray-600 dark:text-gray-300 font-medium">Farm :</span>
        <span class="text-textLight dark:text-textDark font-semibold">{{ farmName }}</span>
      </div>
    </div>
  </div>

  <div *ngIf="!hasData" class="text-center py-8">
    <p class="text-gray-500 dark:text-textDark text-lg">No data to display</p>
  </div>

  <div *ngIf="hasData" class="overflow-x-auto">
    <table class="w-full divide-y divide-gray-200 table-auto">
      <thead>
        <tr>
          <th class="px-4 py-3 font-normal text-gray-500 dark:text-textDark text-center">Asset Name</th>
          <th class="px-4 py-3 font-normal text-gray-500 dark:text-textDark text-center">Asset Type</th>
          <th class="px-4 py-3 font-normal text-gray-500 dark:text-textDark text-center">Other Type</th>
          <th class="px-4 py-3 font-normal text-gray-500 dark:text-textDark text-center">No.of Units</th>
          <th class="px-4 py-3 font-normal text-gray-500 dark:text-textDark text-center">Unit Price</th>
          <th class="px-4 py-3 font-normal text-gray-500 dark:text-textDark text-center">Total Price</th>
          <th class="px-4 py-3 font-normal text-gray-500 dark:text-textDark text-center">Warranty</th>
          <th class="px-4 py-3 font-normal text-gray-500 dark:text-textDark text-center">Warranty Status</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of fixedAssetB">
          <td class="px-4 py-3 text-gray-500 dark:text-textDark text-center">{{ item.asset }}</td>
          <td class="px-4 py-3 text-gray-500 dark:text-textDark text-center">{{ item.assetType }}</td>
          <td class="px-4 py-3 text-gray-500 dark:text-textDark text-center">{{ item.mentionOther }}</td>
          <td class="px-4 py-3 text-gray-500 dark:text-textDark text-center">{{ item.numberOfUnits }}</td>
          <td class="px-4 py-3 text-gray-500 dark:text-textDark text-center">{{ item.unitPrice | currency }}</td>
          <td class="px-4 py-3 text-gray-500 dark:text-textDark text-center">{{ item.totalPrice | currency }}</td>
          <td class="px-4 py-3 text-gray-500 dark:text-textDark text-center">{{ item.warranty }}</td>
          <td class="px-4 py-3 text-center">
            <div *ngIf="item.warrantystatus === 'Expired' || item.warrantystatus === 'expired'">
              <span class="w-24 h-7 inline-block bg-red-100 text-red-500 font-medium rounded-md px-3 py-1 text-sm">
                {{ item.warrantystatus }}
              </span>
            </div>
            <div *ngIf="item.warrantystatus === 'Under Warranty' || item.warrantystatus === 'under warranty'">
              <span class="w-40 h-7 inline-block bg-green-100 text-green-500 font-medium rounded-md px-3 py-1 text-sm">
                {{ item.warrantystatus }}
              </span>
            </div>
            <div
              *ngIf="item.warrantystatus !== 'Under Warranty' && item.warrantystatus !== 'under warranty' && item.warrantystatus !== 'Expired' && item.warrantystatus !== 'expired'">
              <span
                class="w-24 h-7 inline-block bg-yellow-100 text-yellow-500 font-medium rounded-md px-3 py-1 text-sm">
                {{ item.warrantystatus || 'No data' }}
              </span>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>